<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button type="submit" id="start-stop">start</button>
    <table id="device-table">
    <thead>
    <tr>
        <th id="device-name">Device Name</th>
        <th id="task-name">Tasks</th>
    </tr>
    </thead>
    <tbody id="device-table-body">
    </tbody>
    </table>
</body>
</html>

<script>
var getResponse = function(){
  var tasks = ["task1", "task2", "task3","task4","task5" ];
  var devices = ["device1", "device2", "device3","device4","device5", "device6", "device7"];
  var response = [];
  devices.forEach(function(device){
      if (Math.random() >= 0.7){
          var task_names = [];
          tasks.forEach(function(task){
              if (Math.random() >= 0.7){
                  task_names.push(task);
              }
          });
          if(task_names.length > 0){
              response.push({"device":device, "tasks":task_names})
          }
      }
  });
  return response;
};

// YOUR SOLUTION JAVASCRIPT CODE HERE
let isClicked = false;
$("#start-stop").click(function(){
	if(isClicked) {
  	isClick = false
    $("#start-stop").text("start")
  } else {
    isClicked = true;
    $("#start-stop").text("stop")
    let data = getResponse();
    for (let item of data){
      $("#device-table-body").append(`<tr id=${item.device}><td>${item.device}</td></tr>`);
      for (let i of item.tasks) {
        $(`#${item.device}`).append(`<td>${i}</td>`)
      }
  	}
  }
})

</script>
